<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ff0000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Khanakhajan Hotel - Welcome</title>
    <style>
        .customer-details {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .customer-details h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .customer-details .form-group {
            margin-bottom: 15px;
        }

        .customer-details input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .customer-details input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .customer-details input::placeholder {
            color: #999;
        }

        .customer-details input:invalid {
            border-color: #ff4444;
        }

        /* Table Selection Styles */
        .table-selection {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .table-selection select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
            cursor: pointer;
        }

        .table-selection select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .table-selection select:invalid {
            color: #999;
        }

        .success-modal {
            max-width: 400px;
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            position: relative;
            animation: popIn 0.5s cubic-bezier(0.26, 0.53, 0.74, 1.48);
        }

        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: #4CAF50;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: scaleIn 0.5s ease-out 0.2s both;
        }

        .success-icon i {
            font-size: 40px;
            color: white;
            animation: checkmark 0.8s ease-in-out 0.5s both;
        }

        .success-modal h2 {
            color: #333;
            font-size: 28px;
            margin: 0 0 10px;
            font-weight: 600;
        }

        .success-message {
            color: #666;
            font-size: 18px;
            margin: 0 0 25px;
            line-height: 1.5;
        }

        .success-message strong {
            display: block;
            color: #4CAF50;
            font-size: 20px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 5px;
        }

        .order-number {
            background: #f8f9fa;
            padding: 12px 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 16px;
            color: #333;
        }

        .close-success-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .close-success-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
        }

        @keyframes popIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            0% {
                transform: scale(0);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes checkmark {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .customer-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .customer-info p {
            margin: 10px 0;
        }

        .order-summary {
            margin-bottom: 20px;
        }

        .order-summary h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .confirm-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }

        .total-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .thank-you-message {
            text-align: center;
            color: var(--primary-color);
            font-size: 18px;
            margin: 20px 0;
        }

        .close-success-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .close-success-btn:hover {
            background: #d32f2f;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Error Modal Styles */
        .error-modal {
            max-width: 400px;
            width: 90%;
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            position: relative;
            animation: popIn 0.5s cubic-bezier(0.26, 0.53, 0.74, 1.48);
            margin: 20px;
        }

        .error-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: #ff4444;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: scaleIn 0.5s ease-out 0.2s both;
        }

        .error-icon i {
            font-size: 40px;
            color: white;
            animation: shake 0.8s ease-in-out both;
        }

        .error-modal h2 {
            color: #333;
            font-size: 24px;
            margin: 0 0 10px;
            font-weight: 600;
        }

        .error-message {
            color: #666;
            font-size: 16px;
            margin: 0 0 20px;
            line-height: 1.5;
        }

        .close-error-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            width: 100%;
            max-width: 200px;
        }

        .close-error-btn:hover {
            background: #ff3333;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 68, 68, 0.2);
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        /* Mobile Responsive Styles for Error Modal */
        @media screen and (max-width: 480px) {
            .error-modal {
                width: 85%;
                padding: 20px;
                margin: 15px;
            }

            .error-icon {
                width: 60px;
                height: 60px;
                margin-bottom: 15px;
            }

            .error-icon i {
                font-size: 30px;
            }

            .error-modal h2 {
                font-size: 20px;
            }

            .error-message {
                font-size: 14px;
                margin-bottom: 15px;
            }

            .close-error-btn {
                padding: 10px 30px;
                font-size: 14px;
                margin-top: 12px;
            }
        }

        .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.4s ease;
        }

        .cart-section {
            padding: 20px;
        }

        .cart-section h2 {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
        }

        .customer-details,
        .order-type,
        .delivery-details,
        .table-selection {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .customer-details:hover,
        .order-type:hover,
        .delivery-details:hover,
        .table-selection:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .customer-details h3,
        .order-type h3,
        .delivery-details h3,
        .table-selection h3 {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            outline: none;
        }

        .order-type-options {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .order-type-options label {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: #fff;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }

        .order-type-options label:hover {
            background: #f0f0f0;
        }

        .order-type-options input[type="radio"]:checked+label {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .cart-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 20px 0;
            background: #fff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .cart-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .cart-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .cart-table tr:last-child td {
            border-bottom: none;
        }

        .cart-table tr:hover {
            background: #f8f9fa;
        }

        .bill-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .bill-details h3 {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .bill-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .bill-row.total {
            border-top: 2px solid #ddd;
            border-bottom: none;
            margin-top: 10px;
            padding-top: 15px;
            font-weight: 600;
            font-size: 18px;
            color: var(--primary-color);
        }

        .payment-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .payment-options {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .payment-options label {
            flex: 1;
            min-width: 120px;
            padding: 15px;
            text-align: center;
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-options label:hover {
            background: #f0f0f0;
        }

        .payment-options input[type="radio"]:checked+label {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .submit-button {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s ease;
        }

        .submit-button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
        }

        .empty-cart {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 18px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 20px 0;
        }

        .qr-section {
            text-align: center;
            margin: 20px 0;
        }

        .upi-qr {
            max-width: 200px;
            border-radius: 10px;
            margin: 0 auto;
            display: block;
        }

        .qr-instruction {
            margin: 15px 0;
            color: #666;
        }

        .upi-id {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 8px;
            display: inline-block;
            margin: 10px 0;
        }

        .or-divider {
            text-align: center;
            position: relative;
            margin: 20px 0;
        }

        .or-divider::before,
        .or-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background: #ddd;
        }

        .or-divider::before {
            left: 0;
        }

        .or-divider::after {
            right: 0;
        }

        @media screen and (max-width: 768px) {
            .modal-content {
                width: 95%;
                padding: 20px;
            }

            .cart-section {
                padding: 10px;
            }

            .order-type-options,
            .payment-options {
                flex-direction: column;
                gap: 10px;
            }

            .order-type-options label,
            .payment-options label {
                width: 100%;
            }

            .bill-details,
            .payment-section {
                padding: 15px;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .order-note {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .order-note:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .order-note h3 {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .order-note textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
            transition: all 0.3s ease;
        }

        .order-note textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            outline: none;
        }

        .order-note textarea::placeholder {
            color: #999;
        }

        .note-character-count {
            text-align: right;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .note-character-count span {
            color: var(--primary-color);
            font-weight: 500;
        }

        /* Add animation for character count changes */
        @keyframes countChange {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
                color: #ff4444;
            }

            100% {
                transform: scale(1);
            }
        }

        .note-character-count span.animate {
            animation: countChange 0.3s ease;
        }

        /* Add a subtle border animation on focus */
        @keyframes borderPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4);
            }

            70% {
                box-shadow: 0 0 0 6px rgba(76, 175, 80, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
            }
        }

        .order-note textarea:focus {
            animation: borderPulse 1.5s infinite;
        }

        /* Add a subtle background color change on hover */
        .order-note textarea:hover {
            background-color: #fff;
        }

        /* Style for when textarea is empty */
        .order-note textarea:placeholder-shown {
            background-color: #fafafa;
        }

        /* Add a subtle transition for the container */
        .order-note {
            animation: slideIn 0.4s ease;
        }

        /* Add responsive styles */
        @media screen and (max-width: 768px) {
            .order-note {
                padding: 15px;
                margin: 15px 0;
            }

            .order-note textarea {
                min-height: 60px;
                font-size: 14px;
            }
        }

        .menu-item {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .menu-item.item-selected {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .quantity-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            transform: scale(1.1);
            background: #d32f2f;
        }

        .quantity {
            font-size: 16px;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Add PWA manifest -->
    <link rel="manifest" href="/assets/manifest.json">
</head>

<body>
    <header>
        <nav>
            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
            <div class="logo">Khanakhajan</div>
            <div class="nav-right">
                <div class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#menu">Menu</a></li>
                <li><a href="#footer">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="slideshow-container">
            <div class="slide-arrows">
                <div class="slide-arrow prev">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="slide-arrow next">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
            <div class="slide fade">
                <img src="https://images.pexels.com/photos/1146760/pexels-photo-1146760.jpeg" alt="Special Pizza">
                <div class="slide-content">
                    <h2>Special Offer!</h2>
                    <p>50% Off on All Pizzas</p>
                    <p class="price">Starting from ₹199</p>
                </div>
            </div>

            <div class="slide fade">
                <img src="https://images.pexels.com/photos/1639562/pexels-photo-1639562.jpeg" alt="Burger Combo">
                <div class="slide-content">
                    <h2>Burger Combo</h2>
                    <p>Get Fries & Drink Free</p>
                    <p class="price">Only ₹299</p>
                </div>
            </div>

            <div class="slide fade">
                <img src="https://images.pexels.com/photos/1352296/pexels-photo-1352296.jpeg" alt="Ice Cream Festival">
                <div class="slide-content">
                    <h2>Ice Cream Festival</h2>
                    <p>Buy 1 Get 1 Free</p>
                    <p class="price">Starting ₹99</p>
                </div>
            </div>

            <div class="slide fade">
                <img src="https://images.pexels.com/photos/2347311/pexels-photo-2347311.jpeg" alt="Noodles Special">
                <div class="slide-content">
                    <h2>Chinese Special</h2>
                    <p>Combo Meals Available</p>
                    <p class="price">Starting ₹249</p>
                </div>
            </div>

            <div class="slide-indicators">
                <span class="indicator"></span>
                <span class="indicator"></span>
                <span class="indicator"></span>
                <span class="indicator"></span>
            </div>
        </div>
    </section>

    <section id="menu" class="menu-section">
        <h2>Our Menu</h2>
        <div class="menu-container">
            <div class="category-sidebar">
                <ul class="category-list">
                    <li class="category-item" data-category="Breakfast">Breakfast</li>
                    <li class="category-item" data-category="Burgers">Burgers</li>
                    <li class="category-item" data-category="Pizza">Pizza</li>
                    <li class="category-item" data-category="Sandwich">Sandwich</li>
                    <li class="category-item" data-category="Frankie">Frankie</li>
                    <li class="category-item" data-category="Noodles">Noodles</li>
                    <li class="category-item" data-category="Fries">Fries</li>
                    <li class="category-item" data-category="Pavbhaji">Pav Bhaji</li>
                    <li class="category-item" data-category="Refreshments">Refreshments</li>
                </ul>
            </div>
            <div class="menu-grid">
                <!-- Breakfast -->
                <!-- <div class="menu-item" data-category="breakfast">
                    <img src="" alt="Masala Dosa">
                    <div class="menu-item-content">
                        <h3>Masala Dosa</h3>
                        <p class="description">Crispy dosa with potato filling</p>
                        <p class="price">₹120</p>
                        <div class="quantity-controls">
                            <button class="quantity-btn minus">-</button>
                            <span class="quantity">0</span>
                            <button class="quantity-btn plus">+</button>
                        </div>
                    </div>
                </div> -->
            </div>
    </section>

    <!-- Add Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="cart-section">
                <h2>Your Order</h2>

                <form id="orderForm" onsubmit="return handleOrderSubmit(event)">
                    <!-- Order Type Section -->
                    <div class="order-type">
                        <h3>Select Order Type</h3>
                        <div class="order-type-options">
                            <label>
                                <input type="radio" name="orderType" value="dine-in" checked>
                                Dine-in
                            </label>
                            <label>
                                <input type="radio" name="orderType" value="delivery">
                                Delivery
                            </label>
                            <label>
                                <input type="radio" name="orderType" value="pickup">
                                Pickup
                            </label>
                        </div>
                    </div>

                    <!-- Customer Details Section -->
                    <div class="customer-details">
                        <h3>Customer Details</h3>
                        <div class="form-group">
                            <input type="text" id="customerName" name="customerName" placeholder="Your Name *" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" id="customerMobile" name="customerMobile" placeholder="Mobile Number *"
                                pattern="[0-9]{10}" required>
                        </div>
                    </div>

                    <!-- Table Selection Section -->
                    <div class="table-selection" style="display: block;">
                        <h3>Table Selection</h3>
                        <div class="form-group">
                            <select id="tableNumber" name="tableNumber" required>
                                <option value="">Select Table Number *</option>
                                <option value="1">Table 1</option>
                                <option value="2">Table 2</option>
                                <option value="3">Table 3</option>
                                <option value="4">Table 4</option>
                                <option value="5">Table 5</option>
                                <option value="6">Table 6</option>
                                <option value="7">Table 7</option>
                                <option value="8">Table 8</option>
                                <option value="9">Table 9</option>
                                <option value="10">Table 10</option>
                            </select>
                        </div>
                    </div>

                    <!-- Delivery Details Section -->
                    <div class="delivery-details" style="display: none;">
                        <h3>Delivery Details</h3>
                        <div class="form-group">
                            <input type="text" id="deliveryAddress" name="deliveryAddress" placeholder="Delivery Address">
                        </div>
                        <div class="form-group">
                            <input type="text" id="deliveryLandmark" name="deliveryLandmark"
                                placeholder="Landmark (Optional)">
                        </div>
                    </div>

                    <!-- Cart Items Section -->
                    <div class="cart-items">
                        <h3>Cart Items</h3>
                        <table class="cart-table">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Quantity</th>
                                    <th>Price</th>
                                </tr>
                            </thead>
                            <tbody id="cartItemsList">
                                <!-- Cart items will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Order Note Section -->
                    <div class="order-note">
                        <h3>Order Note</h3>
                        <div class="form-group">
                            <textarea id="orderNote" name="orderNote"
                                placeholder="Add any special instructions or notes for your order (e.g., extra spicy, no onions, etc.)"
                                rows="3"></textarea>
                            <div class="note-character-count">
                                <span id="noteCharCount">0</span>/200 characters
                            </div>
                        </div>
                    </div>

                    <!-- Bill Details Section -->
                    <div class="bill-details">
                        <h3>Bill Details</h3>
                        <div class="bill-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">₹0.00</span>
                        </div>
                        <div class="bill-row">
                            <span>GST (5%):</span>
                            <span id="gst">₹0.00</span>
                        </div>
                        <div class="bill-row delivery-charge" style="display: none;">
                            <span>Delivery Charge:</span>
                            <span id="deliveryCharge">₹40.00</span>
                        </div>
                        <div class="bill-row total">
                            <span>Total Amount:</span>
                            <span id="total">₹0.00</span>
                        </div>
                    </div>

                    <!-- Payment Section -->
                    <div class="payment-section">
                        <h3>Payment Method</h3>
                        <div class="payment-options">
                            <label>
                                <input type="radio" name="paymentMethod" value="cash" checked>
                                Cash
                            </label>
                            <label>
                                <input type="radio" name="paymentMethod" value="upi">
                                UPI
                            </label>
                            <label>
                                <input type="radio" name="paymentMethod" value="card">
                                Card
                            </label>
                        </div>

                        <div id="upiDetails" class="payment-details" style="display: none;">
                            <div class="qr-section">
                                <img src="./Screenshot_2025-03-21-09-40-39-07_4336b74596784d9a2aa81f87c2016f50.jpg"
                                    alt="UPI QR Code" id="upiQRCode" class="upi-qr">
                                <p class="qr-instruction">Scan QR code to pay</p>
                                <p class="upi-id">UPI ID: 07.pandeyamit-1@oksbi</p>
                            </div>
                            <div class="form-group">
                                <p class="or-divider">OR</p>
                                <input type="text" name="upiId" placeholder="Enter UPI ID">
                            </div>
                        </div>

                        <div id="cardDetails" class="payment-details" style="display: none;">
                            <div class="form-group">
                                <input type="text" name="cardNumber" placeholder="Card Number">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" name="cardExpiry" placeholder="MM/YY">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="cardCvv" placeholder="CVV">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="submit-button" id="placeOrder">Place Order</button>
                </form>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="footer-content">
            <div class="footer-section" style="--i:0">
                <h3>Contact Us</h3>
                <div class="footer_contact" style="text-align: left;">
                    <p>
                        <a href="tel:+917498593746" class="contact-link">
                            <i class="fas fa-phone"></i> +91 7498593746
                        </a>
                    </p>
                    <p>
                        <a href="mailto:info@khanakhajanhotel.com" class="contact-link">
                            <i class="fas fa-envelope"></i> info@khanakhajanhotel.com
                        </a>
                    </p>
                    <p>
                        <a href="https://wa.me/917498593746" target="_blank" class="contact-link">
                            <i class="fab fa-whatsapp"></i> Chat on WhatsApp
                        </a>
                    </p>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Main Street, City</p>
                </div>

                <div class="contact-form">
                    <form id="contactForm">
                        <div class="form-group">
                            <input type="text" placeholder="Your Name" required>
                        </div>
                        <div class="form-group">
                            <input type="email" placeholder="Your Email" required>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="Your Message" required></textarea>
                        </div>
                        <button type="submit">Send Feedback</button>
                    </form>
                </div>
            </div>

            <div class="footer-section" style="--i:1">
                <h3>Quick Links</h3>
                <ul class="quick-links" style="text-align: left;">
                    <div class="footer_quick_links">
                        <li><a href="#home"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#menu"><i class="fas fa-chevron-right"></i> Menu</a></li>
                        <li><a href="#footer"><i class="fas fa-chevron-right"></i> Contact</a></li>

                    </div>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>

                </ul>

            </div>

            <div class="footer-section" style="--i:2">
                <h3>Opening Hours</h3>
                <div class="footer_opening_hours" style="text-align: left;">
                    <p><i class="far fa-clock"></i> Monday - Friday:<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11:00
                        AM - 10:00 PM</p>
                    <p><i class="far fa-clock"></i> Saturday - Sunday:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11:00 AM - 11:00 PM</p>
                </div>

            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Khanakhajan Hotel. All rights reserved.</p>
            <p>Designed for food lovers <i class="fas fa-heart" style="color: var(--primary-color);"></i> </p>
        </div>
    </footer>

    <!-- Order Success Modal -->
    <div id="orderSuccessModal" class="modal">
        <div class="modal-content success-modal">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Order Successful!</h2>
            <p class="success-message">Your delicious food is being prepared</p>
            <div class="order-number">
                <span>Order #: KKH</span><span id="orderNumber"></span>
            </div>
            <button class="close-success-btn">Done</button>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content error-modal">
            <div class="error-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2>Oops!</h2>
            <p class="error-message" id="errorMessage"></p>
            <button class="close-error-btn">OK</button>
        </div>
    </div>

    <script>
        // Enhanced Slideshow functionality
        const slides = document.querySelectorAll('.slide');
        const indicators = document.querySelectorAll('.indicator');
        const prevArrow = document.querySelector('.slide-arrow.prev');
        const nextArrow = document.querySelector('.slide-arrow.next');
        let currentSlide = 0;
        let slideTimer;
        const slideInterval = 5000;
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;

        function showSlide(index, direction = 'next') {
            // Remove active class from current slide and indicator
            slides[currentSlide].classList.remove('active');
            indicators[currentSlide].classList.remove('active');

            // Update current slide index
            currentSlide = index;

            // Add active class to new slide and indicator
            slides[currentSlide].classList.add('active');
            indicators[currentSlide].classList.add('active');

            // Reset and start the indicator progress
            resetIndicatorProgress();
        }

        function resetIndicatorProgress() {
            const activeIndicator = indicators[currentSlide];
            const progressBar = activeIndicator.querySelector('::after');
            if (progressBar) {
                progressBar.style.left = '-100%';
                setTimeout(() => {
                    progressBar.style.left = '0';
                }, 50);
            }
        }

        function nextSlide() {
            const nextIndex = (currentSlide + 1) % slides.length;
            showSlide(nextIndex, 'next');
        }

        function previousSlide() {
            const prevIndex = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(prevIndex, 'prev');
        }

        function startSlideTimer() {
            stopSlideTimer();
            slideTimer = setInterval(nextSlide, slideInterval);
        }

        function stopSlideTimer() {
            if (slideTimer) clearInterval(slideTimer);
        }

        // Touch event handlers
        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            stopSlideTimer();
        }

        function handleTouchMove(e) {
            if (!touchStartX || !touchStartY) return;

            touchEndX = e.touches[0].clientX;
            touchEndY = e.touches[0].clientY;

            // Calculate distance
            const xDiff = touchStartX - touchEndX;
            const yDiff = touchStartY - touchEndY;

            // Only prevent default if swipe is more horizontal than vertical
            if (Math.abs(xDiff) > Math.abs(yDiff)) {
                e.preventDefault();
            }
        }

        function handleTouchEnd() {
            if (!touchStartX || !touchEndX) return;

            const xDiff = touchStartX - touchEndX;
            const yDiff = touchStartY - touchEndY;

            if (Math.abs(xDiff) > Math.abs(yDiff)) {
                if (Math.abs(xDiff) > 50) { // Minimum swipe distance
                    if (xDiff > 0) {
                        nextSlide();
                    } else {
                        previousSlide();
                    }
                }
            }

            // Reset values
            touchStartX = 0;
            touchStartY = 0;
            touchEndX = 0;
            touchEndY = 0;

            startSlideTimer();
        }

        // Event Listeners
        prevArrow.addEventListener('click', () => {
            previousSlide();
            stopSlideTimer();
            startSlideTimer();
        });

        nextArrow.addEventListener('click', () => {
            nextSlide();
            stopSlideTimer();
            startSlideTimer();
        });

        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                if (index !== currentSlide) {
                    showSlide(index);
                    stopSlideTimer();
                    startSlideTimer();
                }
            });
        });

        const slideshowContainer = document.querySelector('.slideshow-container');
        slideshowContainer.addEventListener('touchstart', handleTouchStart, false);
        slideshowContainer.addEventListener('touchmove', handleTouchMove, false);
        slideshowContainer.addEventListener('touchend', handleTouchEnd, false);

        slideshowContainer.addEventListener('mouseenter', stopSlideTimer);
        slideshowContainer.addEventListener('mouseleave', startSlideTimer);

        // Initialize slideshow
        showSlide(0);
        startSlideTimer();

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                previousSlide();
                stopSlideTimer();
                startSlideTimer();
            } else if (e.key === 'ArrowRight') {
                nextSlide();
                stopSlideTimer();
                startSlideTimer();
            }
        });

        // Initialize cart array and constants
        let cart = [];
        const GST_RATE = 0.05;
        const DELIVERY_CHARGE = 40;

        // Cart icon and modal elements
        const cartIcon = document.querySelector('.cart-icon');
        const cartModal = document.getElementById('cartModal');
        const closeModal = document.querySelector('.close-modal');
        const cartCount = document.querySelector('.cart-count');
        const modalContent = cartModal.querySelector('.modal-content');

        // Category and menu items
        const categoryItems = document.querySelectorAll('.category-item');
        const menuItems = document.querySelectorAll('.menu-item');

        // Function to attach quantity control listeners
        function attachQuantityListeners() {
            document.querySelectorAll('.quantity-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const menuItem = this.closest('.menu-item');
                    const itemName = menuItem.querySelector('h3').textContent;
                    const itemPrice = parseFloat(menuItem.querySelector('.price').textContent.replace('₹', ''));
                    const itemId = menuItem.querySelector('span').textContent;
                    const quantitySpan = this.parentElement.querySelector('.quantity');
                    let quantity = parseInt(quantitySpan.textContent);

                    if (this.classList.contains('plus')) {
                        quantity++;
                        updateCart(itemName, itemPrice, itemId, true);
                    } else if (this.classList.contains('minus') && quantity > 0) {
                        quantity--;
                        updateCart(itemName, itemPrice, itemId, false);
                    }

                    quantitySpan.textContent = quantity;

                    // Add visual feedback
                    menuItem.classList.add('item-selected');
                    setTimeout(() => {
                        menuItem.classList.remove('item-selected');
                    }, 300);

                    if ('vibrate' in navigator) {
                        navigator.vibrate(50);
                    }
                });
            });
        }

        // Show breakfast items by default and set up category switching
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch("http://localhost:8080/api/item");
                const data = await response.json();

                const menuGrid = document.querySelector(".menu-grid");
                menuGrid.innerHTML = data.map(d => {
                    return `<div class="menu-item" data-category="${d.category}">
                        <img src="http://localhost:8080/${d.image_url}" alt="${d.item_name}">
                        <div class="menu-item-content">
                            <span style="display: none;">${d.item_id}</span>
                            <h3>${d.item_name}</h3>
                            <p class="description">${d.description}</p>
                            <p class="price">₹${d.price}</p>
                            <div class="quantity-controls">
                                <button class="quantity-btn minus">-</button>
                                <span class="quantity">0</span>
                                <button class="quantity-btn plus">+</button>
                            </div>
                        </div>
                    </div>`;
                }).join('');

                // Attach quantity listeners after loading menu items
                attachQuantityListeners();

                // Set up category switching
                categoryItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const category = item.dataset.category;
                        categoryItems.forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                        filterMenuItems(category);
                    });
                });

                // Set breakfast as default category
                const breakfastCategory = document.querySelector('[data-category="Breakfast"]');
                if (breakfastCategory) {
                    categoryItems.forEach(item => item.classList.remove('active'));
                    breakfastCategory.classList.add('active');
                    filterMenuItems('Breakfast');
                }
            } catch (error) {
                console.error('Error loading menu items:', error);
                showError('Failed to load menu items. Please try again later.');
            }
        });

        function filterMenuItems(category) {
            const menuItems = document.querySelectorAll(".menu-item");
            menuItems.forEach(menuItem => {
                if (menuItem.dataset.category === category) {
                    menuItem.style.display = 'block';
                    menuItem.style.animation = 'fadeInUp 0.6s forwards';
                } else {
                    menuItem.style.display = 'none';
                }
            });
        }

        // Cart functionality
        function updateCart(itemName, itemPrice, itemId, isAdd) {
            const existingItem = cart.find(item => item.name === itemName);

            if (isAdd) {
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ name: itemName, price: itemPrice, id: itemId, quantity: 1 });
                }
            } else {
                if (existingItem) {
                    existingItem.quantity--;
                    if (existingItem.quantity === 0) {
                        cart = cart.filter(item => item.name !== itemName);
                    }
                }
            }

            updateCartDisplay();
            updateCartCount();
        }

        function updateCartDisplay() {
            const cartItemsList = document.getElementById('cartItemsList');
            if (!cartItemsList) return;

            if (cart.length === 0) {
                cartItemsList.innerHTML = '<tr><td colspan="3" class="empty-cart">Your cart is empty</td></tr>';
                return;
            }

            cartItemsList.innerHTML = cart.map(item => `
                <tr>
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>₹${(item.price * item.quantity).toFixed(2)}</td>
                </tr>
            `).join('');

            updateBillDetails();
        }

        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.style.display = totalItems > 0 ? 'flex' : 'none';

            // Add animation
            cartCount.style.animation = 'none';
            cartCount.offsetHeight; // Trigger reflow
            cartCount.style.animation = 'bounce 0.5s ease';
        }

        function updateBillDetails() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const gst = subtotal * GST_RATE;
            const deliveryCharge = document.querySelector('input[name="orderType"]:checked').value === 'delivery' ? DELIVERY_CHARGE : 0;
            const total = subtotal + gst + deliveryCharge;

            document.getElementById('subtotal').textContent = `₹${subtotal.toFixed(2)}`;
            document.getElementById('gst').textContent = `₹${gst.toFixed(2)}`;
            document.getElementById('total').textContent = `₹${total.toFixed(2)}`;
        }

        // Cart modal controls
        cartIcon.addEventListener('click', () => {
            cartModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            modalContent.style.animation = 'slideIn 0.4s ease';
        });

        closeModal.addEventListener('click', () => {
            cartModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        window.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // Order type handling
        document.querySelectorAll('input[name="orderType"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const deliveryDetails = document.querySelector('.delivery-details');
                const deliveryCharge = document.querySelector('.delivery-charge');
                const tableSelection = document.querySelector('.table-selection');
                const tableNumber = document.getElementById('tableNumber');

                if (e.target.value === 'delivery') {
                    deliveryDetails.style.display = 'block';
                    deliveryCharge.style.display = 'flex';
                    tableSelection.style.display = 'none';
                    document.getElementById('deliveryAddress').required = true;
                    tableNumber.required = false;
                } else if (e.target.value === 'dine-in') {
                    deliveryDetails.style.display = 'none';
                    deliveryCharge.style.display = 'none';
                    tableSelection.style.display = 'block';
                    document.getElementById('deliveryAddress').required = false;
                    tableNumber.required = true;
                } else {
                    deliveryDetails.style.display = 'none';
                    deliveryCharge.style.display = 'none';
                    tableSelection.style.display = 'none';
                    document.getElementById('deliveryAddress').required = false;
                    tableNumber.required = false;
                }

                updateBillDetails();
            });
        });

        // Payment method handling
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const upiDetails = document.getElementById('upiDetails');
                const cardDetails = document.getElementById('cardDetails');

                if (e.target.value === 'upi') {
                    upiDetails.style.display = 'block';
                    cardDetails.style.display = 'none';
                    document.querySelector('input[name="upiId"]').required = true;
                    document.querySelector('input[name="cardNumber"]').required = false;
                    document.querySelector('input[name="cardExpiry"]').required = false;
                    document.querySelector('input[name="cardCvv"]').required = false;
                } else if (e.target.value === 'card') {
                    cardDetails.style.display = 'block';
                    upiDetails.style.display = 'none';
                    document.querySelector('input[name="upiId"]').required = false;
                    document.querySelector('input[name="cardNumber"]').required = true;
                    document.querySelector('input[name="cardExpiry"]').required = true;
                    document.querySelector('input[name="cardCvv"]').required = true;
                } else {
                    upiDetails.style.display = 'none';
                    cardDetails.style.display = 'none';
                    document.querySelector('input[name="upiId"]').required = false;
                    document.querySelector('input[name="cardNumber"]').required = false;
                    document.querySelector('input[name="cardExpiry"]').required = false;
                    document.querySelector('input[name="cardCvv"]').required = false;
                }
            });
        });

        // Add this function to show error modal
        function showError(message) {
            const errorModal = document.getElementById('errorModal');
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Add error modal close handler
        document.querySelector('.close-error-btn').addEventListener('click', () => {
            document.getElementById('errorModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        // Add this function to handle form submission
        async function handleOrderSubmit(event) {
            event.preventDefault();

            if (cart.length === 0) {
                showError('Please add items to your cart before placing an order.');
                return false;
            }

            // Get form data
            const formData = new FormData(event.target);
            const orderType = formData.get('orderType');
            
            // Generate a single order_id to be used for the order and each item
            const orderId = Date.now();

            // Create order data in the required format
            const orderData = {
                order_id: orderId,
                timestamp: new Date().toISOString().slice(0, 19),
                order_type: orderType.toLowerCase(),
                order_status: "pending",
                payment_type: formData.get('paymentMethod').toLowerCase(),
                note: formData.get('orderNote') || "",
                customer_name: formData.get('customerName'),
                mobile_num: parseInt(formData.get('customerMobile')),
                from_counter: false,
                items: cart.map(item => ({
                    item_id: item.id,
                    order_id: orderId,
                    count: item.quantity
                })),
                total: parseFloat(document.getElementById('total').textContent.replace('₹', ''))
            };

            // Add order type specific fields
            if (orderType === 'dine-in') {
                orderData.table_num = parseInt(formData.get('tableNumber'));
                orderData.address = `Table ${orderData.table_num}, Khanakhajan Restaurant`;
            } else if (orderType === 'delivery') {
                orderData.table_num = -1; // Set table number to -1 for delivery
                orderData.address = formData.get('deliveryAddress');
                if (formData.get('deliveryLandmark')) {
                    orderData.address += ` (Near ${formData.get('deliveryLandmark')})`;
                }
            } else {
                orderData.table_num = -1; // Set table number to -1 for pickup
                orderData.address = "Pickup Counter, Khanakhajan Restaurant";
            }

            console.log(orderData);

            try {
                // Send POST request to the API
                const response = await fetch('http://localhost:8080/api/order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData)
                });

                // Check if the response is JSON
                const contentType = response.headers.get('content-type');
                let result;
                if (contentType && contentType.includes('application/json')) {
                    result = await response.json();
                } else {
                    result = await response.text(); // Handle non-JSON response
                    console.log('Non-JSON response:', result);
                }

                if (!response.ok) {
                    throw new Error('Failed to place order');
                }

                console.log('Order placed successfully:', result);

                // Show success modal
                const orderSuccessModal = document.getElementById('orderSuccessModal');
                const orderNumber = document.getElementById('orderNumber');
                orderNumber.textContent = result.order_id || Math.floor(Math.random() * 10000).toString().padStart(4, '0');

                // Update success message based on order type
                const successMessage = document.querySelector('.success-message');
                if (orderData.order_type === 'dine-in') {
                    successMessage.innerHTML = `Your delicious food is being prepared<br><strong>Please wait at Table ${orderData.table_num}</strong>`;
                } else if (orderData.order_type === 'delivery') {
                    successMessage.textContent = 'Your delicious food is being prepared for delivery';
                } else {
                    successMessage.textContent = 'Your delicious food is being prepared for pickup';
                }

                // Show success modal
                orderSuccessModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';

                // Reset cart and form after successful order
                setTimeout(() => {
                    orderSuccessModal.style.display = 'none';
                    document.body.style.overflow = 'auto';

                    // Reset cart and form
                    cart = [];
                    updateCartDisplay();
                    updateCartCount();
                    document.querySelectorAll('.quantity').forEach(span => span.textContent = '0');
                    event.target.reset();
                    cartModal.style.display = 'none';
                }, 5000);

            } catch (error) {
                console.error('Error placing order:', error);
                showError('Failed to place order. Please try again.');
            }

            return false;
        }

        // Add character count functionality for order note
        const orderNote = document.getElementById('orderNote');
        const noteCharCount = document.getElementById('noteCharCount');
        const MAX_CHARS = 200;

        orderNote.addEventListener('input', function () {
            const currentLength = this.value.length;
            noteCharCount.textContent = currentLength;

            // Add animation class when reaching limit
            if (currentLength >= MAX_CHARS) {
                noteCharCount.classList.add('animate');
                setTimeout(() => noteCharCount.classList.remove('animate'), 300);
            }

            // Prevent typing beyond limit
            if (currentLength > MAX_CHARS) {
                this.value = this.value.substring(0, MAX_CHARS);
            }
        });
    </script>
</body>

</html>